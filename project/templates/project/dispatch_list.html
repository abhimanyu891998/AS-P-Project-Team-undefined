{% extends 'project/base.html' %}
<<<<<<< HEAD
{% load static %}
{% block content %}


<div id="contents">
       
</div>


</table>
<button id="dispatch" data-js-vars=”{{ dispatch_order_list }}”>Dispatch</button> 
<button id="genCSV">Generate CSV</button> 

<script>
    
    var dispatch_button=document.getElementById("dispatch");
    var gen_CSV_button=document.getElementById("genCSV");
    var contents=document.getElementById("contents");
    var dispatchOrderList={{ dispatch_order_list | safe}};
    var toSendIds=[]



    document.getElementsByTagName("body")[0].onload=putContentsInHtml()
    
   
    

    dispatch_button.onclick=function(){
        dispatch_order_list=[]
        console.log(dispatchOrderList)
        for(var i=0; i<dispatchOrderList.length;i++){
            toSendIds.push(dispatchOrderList[i].pk);
        }
        console.log(toSendIds);
       
        $.ajax({
            type: "POST",
            url: '/dispatch/',
            data: toSendIds,
            success: ()=>console.log("Done"),
            credentials: 'include'
          });


    };


    gen_CSV_button.onclick=function(){
        
    }



    function putContentsInHtml(){
        var tempString;
        tempString = "<table border: 1px solid black;\"> <thead> <th> Order Id: </th> <th> Order Wt.</th> </thead>"
        for(var i=0;i<dispatchOrderList.length;i++){
            tempString+="<tr>"
            tempString+="<td> "+dispatchOrderList[i].pk+"</td>";
            tempString+="<td> "+dispatchOrderList[i].fields.total_weight+"</td>"
            tempString+="<tr>"
        }
        tempString+="</table>"
        console.log(tempString);
        contents.innerHTML=tempString
    }
    
=======

{% for order in dispatch_order_list %}
<p>{{order.total_weight}}</p><br>
>>>>>>> bc642981b6fa32529b89d4b40e92ea774076b2e9

        
</script>

{% endblock %}